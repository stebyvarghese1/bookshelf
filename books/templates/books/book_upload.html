{% extends "base.html" %}
{% block title %}Upload Book{% endblock %}

{% block content %}
<div class="container mt-4">
  <div class="card shadow-lg p-4 rounded">
    <h2 class="mb-4 text-center">ğŸ“¤ Upload a New Book</h2>

    <form method="post" enctype="multipart/form-data">
      {% csrf_token %}
      
      <div class="mb-3">
        <label for="title" class="form-label fw-bold">ğŸ“– Title</label>
        <input type="text" name="title" id="title" class="form-control" placeholder="Enter book title" required>
      </div>

      <div class="mb-3">
        <label for="author" class="form-label fw-bold">âœï¸ Author</label>
        <input type="text" name="author" id="author" class="form-control" placeholder="Author name" required>
      </div>

      <div class="mb-3">
        <label for="about" class="form-label fw-bold">ğŸ“ About</label>
        <textarea name="about" id="about" rows="3" class="form-control" placeholder="Short description about this book (optional)"></textarea>
      </div>

      <div class="mb-3">
        <label for="file" class="form-label fw-bold">ğŸ“‚ Book PDF</label>
        <input type="file" name="file" id="file" class="form-control" accept="application/pdf" required>
        <div class="form-text">Upload your book in PDF format.</div>
      </div>

      <div class="mb-3">
        <label for="cover_image" class="form-label fw-bold">ğŸ“¸ Cover Image</label>
        <input type="file" name="cover_image" id="cover_image" class="form-control" accept="image/*">
        <div class="form-text">Optional: Upload a custom cover (otherwise auto-generated).</div>
      </div>

      <button type="submit" class="btn btn-primary w-100 fw-bold">ğŸš€ Upload Book</button>
    </form>
  </div>
</div>

{% if messages %}
  <div class="container mt-3">
    {% for message in messages %}
      <div class="alert 
        {% if message.tags == 'success' %}alert-success{% endif %}
        {% if message.tags == 'warning' %}alert-warning{% endif %}
        {% if message.tags == 'error' %}alert-danger{% endif %}
        alert-dismissible fade show shadow-sm" role="alert">
        {{ message }}
      </div>
    {% endfor %}
  </div>

  <script>
    // Auto dismiss alerts after 3s
    setTimeout(() => {
      const alerts = document.querySelectorAll('.alert');
      alerts.forEach(alert => {
        alert.classList.remove('show');
        setTimeout(() => alert.remove(), 500);
      });
    }, 3000);
  </script>
{% endif %}
{% endblock %}
