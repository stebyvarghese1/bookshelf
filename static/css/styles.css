:root {
  --bg: #0f1115;
  --fg: #eaeef6;
  --muted: #9aa3b2;
  --accent: #7db4ff;
  --wood: #2b2220;
  --shelf-edge: #3a2f2c;
}

* { box-sizing: border-box; }
body {
  margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  background: radial-gradient(1000px 600px at 20% -10%, #172033, #0f1115 60%);
  color: var(--fg);
}

.topbar {
  display: flex; align-items: center; justify-content: space-between;
  padding: 12px 18px; background: #0c0f14; border-bottom: 1px solid #1f2430;
  position: sticky; top: 0; z-index: 1000;
}
.topbar .brand { text-decoration: none; color: var(--fg); font-weight: 700; }
.topbar nav a { color: var(--muted); text-decoration: none; margin-left: 16px; }
.topbar nav a:hover { color: var(--fg); }

.footer { text-align: center; color: var(--muted); font-size: 12px; padding: 18px; border-top: 1px solid #1f2430; }

main { padding: 24px; }

/* 3D Shelf */
.shelf-wrap { display: grid; place-items: center; }
.shelf {
  width: min(1200px, 95vw);
  perspective: 1200px;
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
  gap: 32px 18px;
  padding: 30px 20px 60px;
  background:
    linear-gradient(var(--shelf-edge), var(--shelf-edge)) bottom/100% 14px no-repeat,
    linear-gradient(transparent, rgba(0,0,0,0.2)) no-repeat;
  border-radius: 10px;
  position: relative;
}
.shelf:before {
  content: "";
  position: absolute;
  inset: 10px 8px 14px 8px;
  background: linear-gradient(180deg, #4a3f3c, var(--wood));
  border-radius: 8px;
  box-shadow: inset 0 20px 30px rgba(0,0,0,0.35), inset 0 -8px 16px rgba(0,0,0,0.45);
  z-index: -1;
}

.book {
  --thickness: 26px;
  display: block; height: 200px; position: relative; transform-style: preserve-3d; transform: rotateY(-12deg);
  cursor: pointer; transition: transform 200ms ease, filter 200ms ease;
  filter: drop-shadow(0 8px 14px rgba(0,0,0,0.5));
  text-decoration: none;
}
.book:hover { transform: rotateY(-4deg) translateY(-2px); }
.book:active { transform: rotateY(0) translateY(-1px) scale(0.99); }

.book__cover, .book__spine {
  position: absolute; inset: 0; border-radius: 6px; backface-visibility: hidden;
}
.book__cover {
  background-size: cover; background-position: center; transform: translateZ(calc(var(--thickness) / 2));
}
.book__spine {
  width: var(--thickness); left: calc(-1 * var(--thickness) / 2); transform: rotateY(90deg);
  background: linear-gradient(90deg, #111, #333);
  display: flex; align-items: center; justify-content: center; padding: 8px;
}
.book__title { writing-mode: vertical-rl; transform: rotate(180deg); font-weight: 700; font-size: 12px; color: #e6e6e6; }
.book__author { position: absolute; bottom: 6px; left: 4px; font-size: 10px; color: #cfd5e2; }

.empty { color: var(--muted); }

/* Admin */
.admin .upload { max-width: 640px; display: grid; gap: 12px; }
.admin .row { display: grid; gap: 6px; }
.admin input, .admin textarea, .admin button {
  padding: 10px 12px; border: 1px solid #2a2f3a; background: #11161f; color: var(--fg); border-radius: 8px;
}
.admin button { background: #1f6bff; border: none; cursor: pointer; }
.admin button:hover { filter: brightness(1.1); }
#admin-books { margin-top: 12px; color: var(--muted); }

/* Reader */
.reader { display: grid; grid-template-columns: 300px 1fr; gap: 18px; }
.reader__sidebar { position: sticky; top: 68px; height: calc(100vh - 96px); overflow: auto; }
.book-card { display: grid; grid-template-columns: 100px 1fr; gap: 12px; align-items: center; }
.book-card__cover { width: 100px; height: 140px; object-fit: cover; border-radius: 6px; }
.book-card__meta h2 { margin: 0; }
.muted { color: var(--muted); }

.tts-panel .row { display: flex; gap: 8px; margin-top: 8px; }
.tts-panel button {
  padding: 8px 12px; border-radius: 8px; border: 1px solid #2a2f3a; background: #121722; color: var(--fg); cursor: pointer;
}
.tts-panel button:hover { filter: brightness(1.1); }

.reader__main { background: #0c1017; border: 1px solid #1c2330; border-radius: 10px; padding: 12px; }
#viewerContainer { height: calc(100vh - 160px); overflow: auto; position: relative; }
.pdf-page {
  margin: 10px auto; width: min(90%, 900px); height: auto; position: relative; transition: transform 350ms ease;
  transform-origin: left center;
}
.pdf-page.turning { transform: rotateY(-12deg) translateX(6px); }

.page-turn-hint { text-align: center; color: var(--muted); font-size: 12px; margin-top: 6px; }
