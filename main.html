<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StoryBooks - Interactive Reading Experience</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Roboto:wght@300;400;500&display=swap');
        
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #f5f5f5;
        }
        
        .book {
            transition: all 0.3s ease;
            transform-style: preserve-3d;
            transform: perspective(1000px);
        }
        
        .book:hover {
            transform: perspective(1000px) rotateY(-10deg) translateY(-5px);
            box-shadow: 0 20px 30px rgba(0, 0, 0, 0.2);
        }
        
        .story-node {
            background: linear-gradient(135deg, #f5f7fa 0%, #e4e8eb 100%);
            border-left: 6px solid #4a5568;
        }
        
        .choice:hover {
            background-color: #4a5568;
            color: white;
        }
        
        #bookshelf {
            perspective: 2000px;
        }
        
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }
    </style>
</head>
<body class="bg-gray-100">
    <div class="container mx-auto px-4 py-8">
        <header class="mb-12 text-center">
            <h1 class="text-5xl font-bold font-serif mb-2 text-gray-800">StoryBooks</h1>
            <p class="text-xl text-gray-600">Where your virtual bookshelf comes to life</p>
        </header>

        <div class="flex flex-col lg:flex-row gap-8">
            <!-- Virtual Bookshelf Section -->
            <section id="bookshelf-section" class="lg:w-1/3 bg-white rounded-lg shadow-lg p-6">
                <h2 class="text-2xl font-serif font-bold mb-6 text-gray-800 flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
                    </svg>
                    Your Virtual Bookshelf
                </h2>
                
                <div id="bookshelf" class="grid grid-cols-2 md:grid-cols-3 gap-4">
                    <!-- Book items will be populated by JavaScript -->
                </div>
                
                <div class="mt-6">
                    <h3 class="text-lg font-semibold mb-2">Reading Stats</h3>
                    <div class="space-y-2">
                        <div class="flex justify-between items-center">
                            <span>Books Completed:</span>
                            <span id="books-completed" class="font-bold">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span>Current Reading:</span>
                            <span id="current-reading" class="font-bold">None</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Interactive Storytelling Section -->
            <section id="story-section" class="lg:w-2/3 bg-white rounded-lg shadow-lg p-6">
                <h2 class="text-2xl font-serif font-bold mb-6 text-gray-800 flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z" />
                    </svg>
                    Interactive Storytelling
                </h2>
                
                <div id="story-container" class="story-node rounded-lg p-6 mb-6">
                    <div id="story-header" class="mb-4">
                        <h3 id="story-title" class="text-xl font-serif font-bold text-gray-800">Select a book to begin your adventure</h3>
                        <div id="story-progress" class="w-full bg-gray-200 h-2 rounded-full hidden">
                            <div id="progress-bar" class="bg-indigo-600 h-2 rounded-full" style="width: 0%"></div>
                        </div>
                    </div>
                    
                    <div id="story-content" class="mb-6">
                        <div id="initial-prompt">
                            <div class="text-center py-8">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 mx-auto text-gray-400 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
                                </svg>
                                <p class="text-lg text-gray-500">Choose a book from your shelf to start reading or exploring interactive story paths.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div id="choice-container" class="space-y-2 hidden">
                        <!-- Choice buttons will be added dynamically -->
                    </div>
                </div>
                
                <div class="flex justify-between mt-4">
                    <button id="prev-btn" class="px-4 py-2 rounded-lg bg-gray-200 hover:bg-gray-300 hidden">
                        ← Previous
                    </button>
                    <button id="next-btn" class="ml-auto px-4 py-2 rounded-lg bg-gray-200 hover:bg-gray-300 hidden">
                        Continue →
                    </button>
                </div>
            </section>
        </div>
    </div>

    <script>
        // Sample book data
        const books = [
            {
                id: 1,
                title: "The Mysterious Island",
                author: "Jules Verne",
                cover: "https://placehold.co/200x300/4a5568/white?text=The+Mysterious+Island",
                pages: 350,
                currentPage: 0,
                interactive: true,
                genres: ["Adventure", "Sci-Fi"],
                description: "A group of castaways build civilization on a remote island with mysterious secrets.",
                storyNodes: [
                    {
                        id: "start",
                        title: "The Mysterious Island",
                        content: "You find yourself washed ashore on a mysterious island after your hot air balloon crashes during a terrible storm. The beach stretches endlessly in both directions, lined with palm trees. To your left, a dense jungle whispers with unknown creatures. To your right, rocky cliffs lead to higher ground where smoke rises in the distance.",
                        choices: [
                            { text: "Explore the jungle", nextNode: "jungle", progress: 10 },
                            { text: "Climb the cliffs towards the smoke", nextNode: "cliffs", progress: 15 }
                        ]
                    },
                    {
                        id: "jungle",
                        title: "Into the Jungle",
                        content: "As you push through the thick foliage, the temperature drops noticeably. Strange bird calls echo around you. You find a clearing with a crystal-clear stream. Nearby, a crude shelter made of branches suggests someone was here before you.",
                        choices: [
                            { text: "Investigate the shelter", nextNode: "shelter", progress: 25 },
                            { text: "Follow the stream inland", nextNode: "stream", progress: 20 }
                        ]
                    },
                    {
                        id: "cliffs",
                        title: "Cliffside Ascent",
                        content: "The climb proves challenging but rewarding. From this vantage point, you see the island is much larger than you imagined. The smoke originates from what appears to be an abandoned laboratory nestled in the hills. A narrow path leads there, but you also spot a cave entrance at cliff base.",
                        choices: [
                            { text: "Approach the laboratory", nextNode: "lab", progress: 30 },
                            { text: "Explore the cave", nextNode: "cave", progress: 25 }
                        ]
                    }
                ]
            },
            {
                id: 2,
                title: "Alice's Wonderland",
                author: "Lewis Carroll",
                cover: "https://placehold.co/200x300/4a5568/white?text=Alice's+Wonderland",
                pages: 200,
                currentPage: 50,
                interactive: false,
                genres: ["Fantasy", "Classic"],
                description: "Follow Alice down the rabbit hole into a world of whimsy and wordplay."
            },
            {
                id: 3,
                title: "Cyberpunk Tales",
                author: "William Gibson",
                cover: "https://placehold.co/200x300/4a5568/white?text=Cyberpunk+Tales",
                pages: 280,
                currentPage: 0,
                interactive: true,
                genres: ["Sci-Fi", "Cyberpunk"],
                description: "Neon-lit narratives from the digital underground.",
                storyNodes: [
                    {
                        id: "start",
                        title: "Neon Dreams",
                        content: "The rain never stops in Neo-Tokyo. You're sitting in a dimly lit noodle bar when a mysterious woman slides into the booth across from you. She pushes a data chip across the table. 'They're watching you,' she whispers. Outside, a black van pulls up.",
                        choices: [
                            { text: "Take the chip and exit through the kitchen", nextNode: "kitchen", progress: 15 },
                            { text: "Confront the van's occupants", nextNode: "confront", progress: 20 }
                        ]
                    }
                ]
            }
        ];

        // Current state
        let currentBook = null;
        let currentNode = null;
        let history = [];

        // DOM elements
        const bookshelfEl = document.getElementById('bookshelf');
        const storyContainerEl = document.getElementById('story-container');
        const storyContentEl = document.getElementById('story-content');
        const choiceContainerEl = document.getElementById('choice-container');
        const storyTitleEl = document.getElementById('story-title');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const progressBar = document.getElementById('progress-bar');
        const storyProgress = document.getElementById('story-progress');
        const booksCompletedEl = document.getElementById('books-completed');
        const currentReadingEl = document.getElementById('current-reading');

        // Initialize bookshelf
        function renderBookshelf() {
            bookshelfEl.innerHTML = '';
            books.forEach(book => {
                const bookEl = document.createElement('div');
                bookEl.className = 'book cursor-pointer';
                bookEl.innerHTML = `
                    <div class="relative h-full">
                        <img src="${book.cover}" alt="${book.title} by ${book.author}" class="w-full h-full object-cover rounded-lg shadow-md">
                        <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-4 rounded-b-lg">
                            <h3 class="text-white font-semibold">${book.title}</h3>
                            <p class="text-white/80 text-sm">${book.author}</p>
                        </div>
                        ${book.currentPage > 0 && book.currentPage < book.pages ? 
                            <div class="absolute top-2 right-2 bg-yellow-500 text-xs px-2 py-1 rounded-full">Reading</div> : 
                            ''}
                        ${book.currentPage === book.pages ? 
                            <div class="absolute top-2 right-2 bg-green-500 text-xs px-2 py-1 rounded-full">Completed</div> : 
                            ''}
                    </div>
                `;
                bookEl.addEventListener('click', () => selectBook(book));
                bookshelfEl.appendChild(bookEl);
            });

            // Update reading stats
            updateReadingStats();
        }

        // Update reading statistics
        function updateReadingStats() {
            const completed = books.filter(b => b.currentPage === b.pages).length;
            const reading = books.find(b => b.currentPage > 0 && b.currentPage < b.pages);
            
            booksCompletedEl.textContent = completed;
            currentReadingEl.textContent = reading ? reading.title : "None";
        }

        // Select a book
        function selectBook(book) {
            currentBook = book;
            
            if (book.interactive && book.storyNodes) {
                startInteractiveStory(book);
            } else {
                displayRegularBook(book);
            }
        }

        // Start interactive story mode
        function startInteractiveStory(book) {
            // Show initial node
            navigateToNode(book.storyNodes[0]);
            
            // Update UI for interactive mode
            document.getElementById('initial-prompt').classList.add('hidden');
            storyProgress.classList.remove('hidden');
            storyTitleEl.textContent = book.title;
        }

        // Display non-interactive book
        function displayRegularBook(book) {
            storyContentEl.innerHTML = `
                <div class="text-center py-8">
                    <img src="${book.cover}" alt="${book.title} cover" class="w-48 h-64 mx-auto mb-6 shadow-lg">
                    <h3 class="text-xl font-serif font-bold mb-2">${book.title}</h3>
                    <p class="text-gray-600 mb-4">by ${book.author}</p>
                    <p class="text-gray-700 mb-6">${book.description}</p>
                    
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <h4 class="font-semibold mb-2">Reading Progress</h4>
                        <div class="w-full bg-gray-200 h-2 rounded-full">
                            <div class="bg-indigo-600 h-2 rounded-full" style="width: ${Math.round((book.currentPage/book.pages)*100)}%"></div>
                        </div>
                        <p class="text-sm text-gray-600 mt-2">Page ${book.currentPage} of ${book.pages}</p>
                        
                        <div class="flex justify-center mt-4 space-x-2">
                            <button onclick="updateReadingProgress(-10)" class="px-3 py-1 bg-gray-200 rounded hover:bg-gray-300">
                                ← Back 10
                            </button>
                            <button onclick="updateReadingProgress(10)" class="px-3 py-1 bg-indigo-600 text-white rounded hover:bg-indigo-700">
                                Forward 10 →
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('initial-prompt').classList.add('hidden');
            storyProgress.classList.add('hidden');
            storyTitleEl.textContent = book.title;
            choiceContainerEl.classList.add('hidden');
            prevBtn.classList.add('hidden');
            nextBtn.classList.add('hidden');
        }

        // Update reading progress for non-interactive books
        function updateReadingProgress(pages) {
            currentBook.currentPage += pages;
            
            // Ensure it stays within bounds
            if (currentBook.currentPage < 0) currentBook.currentPage = 0;
            if (currentBook.currentPage > currentBook.pages) currentBook.currentPage = currentBook.pages;
            
            // Update UI
            selectBook(currentBook);
            renderBookshelf();
        }

        // Navigate to a specific story node
        function navigateToNode(node) {
            currentNode = node;
            
            // Update content
            storyContentEl.innerHTML = `
                <div class="prose max-w-none">
                    <h4 class="text-lg font-semibold mb-2">${node.title}</h4>
                    <p class="whitespace-pre-line">${node.content}</p>
                </div>
            `;
            
            // Update choices
            choiceContainerEl.innerHTML = '';
            if (node.choices && node.choices.length > 0) {
                node.choices.forEach(choice => {
                    const choiceBtn = document.createElement('button');
                    choiceBtn.className = 'choice block w-full p-3 bg-gray-100 hover:bg-gray-200 rounded-lg text-left transition';
                    choiceBtn.textContent = choice.text;
                    choiceBtn.addEventListener('click', () => {
                        const nextNode = currentBook.storyNodes.find(n => n.id === choice.nextNode);
                        if (nextNode) {
                            history.push(currentNode);
                            navigateToNode(nextNode);
                            progressBar.style.width = '${choice.progress}%';
                            updateNextBtn();
                        }
                    });
                    choiceContainerEl.appendChild(choiceBtn);
                });
                choiceContainerEl.classList.remove('hidden');
            } else {
                choiceContainerEl.classList.add('hidden');
            }
            
            // Update navigation buttons
            updatePrevBtn();
            updateNextBtn();
        }

        // Update previous button state
        function updatePrevBtn() {
            if (history.length > 0) {
                prevBtn.classList.remove('hidden');
            } else {
                prevBtn.classList.add('hidden');
            }
        }

        // Update next button state
        function updateNextBtn() {
            if (currentNode.choices && currentNode.choices.length === 0) {
                nextBtn.classList.remove('hidden');
                nextBtn.textContent = 'Start Reading';
                nextBtn.onclick = () => {
                    alert('Starting the full book reading experience...');
                    currentBook.currentPage = 1;
                    renderBookshelf();
                    displayRegularBook(currentBook);
                };
            } else {
                nextBtn.classList.add('hidden');
            }
        }

        // Event listeners
        prevBtn.addEventListener('click', () => {
            if (history.length > 0) {
                navigateToNode(history.pop());
            }
        });

        // Initialize
        renderBookshelf();
    </script>
</body>
</html>